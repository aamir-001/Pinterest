<div class="welcome-message">
    <h2>Good morning, <%= user.username %>!</h2>
    <p>Let's create something amazing today.</p>
</div>

<section class="streams-section">
    <div class="section-header">
        <h3>Your Follow Streams</h3>
        <a href="#" class="create-stream-btn">+ Create Stream</a>
    </div>

    <!-- Streams Grid -->
    <div class="streams-grid">
        <% if (streams && streams.length > 0) { %>
            <% streams.forEach(stream => { %>
                <a href="/streams/<%= stream.stream_id %>" class="stream-card-link">
                    <div class="stream-card">
                        <div class="stream-thumbnail">
                            <span class="stream-thumbnail-icon">ðŸ“‹</span>
                        </div>
                        <div class="stream-info">
                            <h4 class="stream-name"><%= stream.stream_name %></h4>
                            <div class="stream-meta">
                                <span class="stream-count">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="3" width="7" height="7" rx="1"></rect>
                                        <rect x="14" y="3" width="7" height="7" rx="1"></rect>
                                        <rect x="14" y="14" width="7" height="7" rx="1"></rect>
                                        <rect x="3" y="14" width="7" height="7" rx="1"></rect>
                                    </svg>
                                    0 boards <!-- placeholder for now -->
                                </span>
                                <span>â€¢</span>
                                <span>Just created</span> <!-- placeholder for now -->
                            </div>
                        </div>
                    </div>
                </a>
            <% }) %>
        <% } else { %>
            <div class="empty-state">
                <h3>You don't have any follow streams yet!</h3>
                <p>Create a follow stream to organize and track your favorite boards</p>
                <a href="#" class="create-stream-btn">Create Your First Stream</a>
            </div>
        <% } %>

        <% if (streamError) { %>
            <div class="error-message">
                <p><%= streamError %></p>
            </div>
        <% } %>
    </div>
</section>

<!-- Create Stream Modal -->
<div id="createStreamModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Create follow stream</h3>
            <span class="close-modal">&times;</span>
        </div>
        
        <form id="createStreamForm" action="/streams/create" method="POST">
            <div class="form-group">
                <label for="streamName">Name</label>
                <input type="text" id="streamName" name="stream_name" class="form-control" required placeholder="Like 'Design Inspiration' or 'Travel Ideas'">
            </div>
            
            <div class="form-group">
                <label for="streamDescription">Description (optional)</label>
                <textarea id="streamDescription" name="description" class="form-control" rows="3" placeholder="What kind of content will you follow in this stream?"></textarea>
            </div>
            
            <div class="form-actions">
                <button type="button" class="btn-cancel" onclick="closeStreamModal()">Cancel</button>
                <button type="submit" class="btn-create">Create</button>
            </div>
        </form>
    </div>
</div>

<script>
    // Get the modal
    const streamModal = document.getElementById('createStreamModal');
    
    // Get all buttons that open the modal
    const createStreamBtns = document.querySelectorAll('.create-stream-btn');
    
    // Get the <span> element that closes the modal
    const closeStreamBtn = streamModal.querySelector('.close-modal');
    
    // When the user clicks the button, open the modal 
    createStreamBtns.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            streamModal.style.display = "block";
            document.body.style.overflow = "hidden"; // Prevent scrolling
        });
    });
    
    // When the user clicks on <span> (x), close the modal
    closeStreamBtn.addEventListener('click', function() {
        closeStreamModal();
    });
    
    // When the user clicks anywhere outside of the modal, close it
    window.addEventListener('click', function(event) {
        if (event.target == streamModal) {
            closeStreamModal();
        }
    });
    
    // Close modal function
    function closeStreamModal() {
        streamModal.style.display = "none";
        document.body.style.overflow = "auto"; // Re-enable scrolling
    }
</script>